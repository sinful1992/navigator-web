let c=!1,t=null;async function l(){if(c)return Promise.resolve();if(t)return t;const e="your-new-google-maps-api-key-here";return t=new Promise((o,a)=>{if(document.querySelector('script[src*="maps.googleapis.com"]')&&window.google?.maps){c=!0,o();return}const r=`initGoogleMaps_${Date.now()}`;window[r]=()=>{c=!0;try{delete window[r]}catch{}o()};const n=document.createElement("script");n.src=`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=places&loading=async&callback=${r}`,n.async=!0,n.defer=!0,n.onerror=()=>{try{delete window[r]}catch{}a(new Error("Failed to load Google Maps SDK"))},document.head.appendChild(n)}),t}async function g(e){try{if(await l(),!window.google?.maps)throw new Error("Google Maps SDK not loaded");return new Promise(o=>{new window.google.maps.Geocoder().geocode({address:e},(i,r)=>{if(r===window.google.maps.GeocoderStatus.OK&&i&&i.length>0){const n=i[0];o({success:!0,address:e,originalAddress:e,lat:n.geometry.location.lat(),lng:n.geometry.location.lng(),confidence:1,formattedAddress:n.formatted_address})}else r===window.google.maps.GeocoderStatus.ZERO_RESULTS?o({success:!1,address:e,originalAddress:e,error:"No geocoding results found"}):(console.warn(`Geocoding failed with status: ${r}`),o({success:!1,address:e,originalAddress:e,error:`Geocoding failed: ${r}`}))})})}catch(o){return console.error("SDK geocoding error:",o),{success:!1,address:e,originalAddress:e,error:o instanceof Error?o.message:"SDK geocoding failed"}}}function d(){return!0}export{g as geocodeAddressSDK,d as isGoogleMapsSDKAvailable,l as loadGoogleMapsSDK};
